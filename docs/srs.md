# Специфікація вимог до системи

**Проєкт:** Персональний помічник (CLI)  
**Версія:** 1.0
**Дата:** 2025-11-11

---

## 1. Огляд

**Персональний помічник** — це консольний застосунок, призначений для керування даними користувача, включаючи контакти
та нотатки.  
Додаток дозволяє створювати, редагувати, шукати та організовувати персональну інформацію за допомогою текстових команд
CLI.  
Основна мета — спростити управління персональною інформацією без використання графічного інтерфейсу.

---

## 2. Обсяг функціональності

1. **Управління контактами** — для зберігання та керування контактними даними.
2. **Управління нотатками** — для створення та організації текстових нотаток із опційними тегами.
3. Усі дані повинні зберігатися між запусками шляхом запису на диск користувача.

---

## 3. Функціональні вимоги

### 3.1 Загальні

| ID       | Вимога                                                                                                            |
|----------|-------------------------------------------------------------------------------------------------------------------|
| FR-1.1   | Команди                                                                                                           |
| FR-1.1.1 | Система повинна надавати можливість користувачеві вводити команди для виконання                                   |
| FR-1.1.2 | Система повинна повідомляти користувача про результати виконання команди                                          |
| FR-1.1.3 | Система повинна повідомляти якщо користувач ввів невідому команду                                                 |
| FR-1.1.4 | Система повинна відмовити користувачу у виконанні команди, якщо введені дані некоректні                           |
| FR-1.1.5 | Система повинна повідомляти користувача про помилку, якщо введені дані некоректні                                 |
| FR-1.2   | Ключі команди                                                                                                     |
| FR-1.2.1 | Система повинна повідомляти якщо користувач ввів невідомий ключ команди                                           |
| FR-1.3   | Перевірка вводу                                                                                                   |
| FR-1.3.1 | Система повинна перевіряти дані які вводить користувач                                                            |
| FR-1.4   | Довідникова інформація                                                                                            |
| FR-1.4.1 | Система повинна надавати інформацію про перелік команд доступних для виконання в системі на запит від користувача |
| FR-1.4.2 | Система повинна надавати вичерпну довідникову інформацію по кожній команді на запит від користувача               |
| FR-1.5   | Підтвердження                                                                                                     |
| FR-1.5.1 | Система повинна вимагати підтвердження від користувача для всіх операцій видалення                                |

### 3.2 Управління контактами

| ID       | Вимога                                                                                                                                             |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| FR-2.1   | Контакт                                                                                                                                            |
| FR-2.1.1 | Користувач повинен мати можливість створювати контакт                                                                                              |
| FR-2.1.2 | Користувач повинен мати можливість редагувати контакт                                                                                              |
| FR-2.1.3 | Користувач повинен мати можливість видалити контакт                                                                                                |
| FR-2.1.4 | Система повинна ідентифікувати контакт за ім'ям (без урахування регістру), яке ввів користувач                                                     |
| FR-2.1.5 | Система повинна дозволяти користувачеві додавати контакти лише з унікальними іменами                                                               |
| FR-2.2   | Номер телефону                                                                                                                                     |
| FR-2.2.1 | Користувач повинен мати можливість додавати номер телефону до контакту                                                                             |
| FR-2.2.2 | Користувач повинен мати можливість змінювати номер телефону в контакті                                                                             |
| FR-2.2.3 | Система повинна надавати можливість користувачу додавати до контакту декілька номерів телефону                                                     |
| FR-2.2.4 | Система повинна дозволяти користувачеві додавати в контакт лише унікальні телефонні номери                                                         |
| FR-2.2.5 | Система повинна повідомити про помилку, якщо при редагуванні номеру телефону, користувач вказав невідомий номер                                    |
| FR-2.3   | Дата народження                                                                                                                                    |
| FR-2.3.1 | Користувач повинен мати можливість додавати дату народження до контакту                                                                            |
| FR-2.3.2 | Користувач повинен мати можливість оновлювати дату народження в контакті                                                                           |
| FR-2.3.3 | Користувач повинен мати можливість отримати перелік контактів у яких день народження через N днів                                                  |
| FR-2.3.4 | Система повинна при створенні списку контактів у яких день народження через N днів ігнорувати контакти без дати народження                         |
| FR-2.3.5 | Система повинна при створенні списку контактів у яких день народження через N днів видавати контакти у котрих день народження сьогодні, якщо N = 0 |
| FR-2.4   | Електронна пошта                                                                                                                                   |
| FR-2.4.1 | Користувач повинен мати можливість додавати електронну пошту до контакту                                                                           |
| FR-2.4.2 | Користувач повинен мати можливість оновлювати електронну пошту в контакті                                                                          |
| FR-2.5   | Адреса                                                                                                                                             |
| FR-2.5.1 | Користувач повинен мати можливість додавати адресу до контакту                                                                                     |
| FR-2.5.2 | Користувач повинен мати можливість оновлювати адресу в контакті                                                                                    |
| FR-2.6   | Пошук                                                                                                                                              |
| FR-2.6.1 | Користувач повинен мати можливість шукати серед всіх контактів за ім'ям                                                                            |
| FR-2.6.2 | Користувач повинен мати можливість шукати серед всіх контактів за номером телефону                                                                 |
| FR-2.6.3 | Користувач повинен мати можливість шукати серед всіх контактів за електронною поштою                                                               |
| FR-2.6.4 | Користувач повинен мати можливість шукати серед всіх контактів за датою народження                                                                 |
| FR-2.7   | Перевірка даних                                                                                                                                    |
| FR-2.7.1 | Система повинна повідомити про помилку, якщо користувач ввів невідоме ім'я контакту                                                                |
| FR-2.7.2 | Система повинна перевіряти номер телефону на відповідність формату                                                                                 |
| FR-2.7.3 | Система повинна перевіряти адресу електронної пошти на відповідність формату                                                                       |

### 3.3 Управління нотатками

| ID       | Вимога                                                                                                    |
|----------|-----------------------------------------------------------------------------------------------------------|
| FR-3.1   | Нотатки                                                                                                   |
| FR-3.1.1 | Користувач повинен мати можливість створювати нотатки                                                     |
| FR-3.1.2 | Користувач повинен мати можливість редагувати нотатки                                                     |
| FR-3.1.3 | Користувач повинен мати можливість видаляти нотатки                                                       |
| FR-3.1.4 | Система повинна автоматично присвоювати унікальний ідентифікатор нотатки                                  |
| FR-3.2   | Теги                                                                                                      |
| FR-3.2.1 | Користувач повинен мати можливість додавати теги до нотаток                                               |
| FR-3.2.2 | Користувач повинен мати можливість видаляти теги з нотаток                                                |
| FR-3.2.3 | Користувач повинен мати можливість вивести перелік унікальних тегів, які використовуються у всіх нотатках |
| FR-3.2.4 | Система повинна дозволяти користувачеві додавати тільки унікальні теги (без урахування регістру)          |
| FR-3.2.5 | Система повинна при збереженні тегів нормалізувати їх до нижнього регістру                                |
| FR-3.2.6 | Система повинна не враховувати регістр тегів при пошуку по ним                                            |
| FR-3.2.7 | Система повинна ігнорувати невідомі теги при їх видалені                                                  |
| FR-3.2.8 | Система повинна надавати можливість сортування нотаток за тегами (алфавітно, без урахування регістру)     |
| FR-3.3   | Пошук                                                                                                     |
| FR-3.3.1 | Користувач повинен мати можливість пошук нотаток за тегом                                                 |

### 3.4 Збереження даних

| ID     | Вимога                                                                                                       |
|--------|--------------------------------------------------------------------------------------------------------------|
| FR-4.1 | Система повинна зберігати дані після закінчення роботи                                                       |
| FR-4.2 | Система повинна відновлювати свій стан після перезапуску                                                     |
| FR-4.3 | Система повинна при неможливості прочитати основний файл з даними, спробувати відновитися з резервного файлу |

---

## 4. Модель взаємодії

### 4.1 Інтерфейс користувача

- Взаємодія через текстові команди CLI.
- Кожна операція виконується через конкретну команду.
- Система надає текстове повідомлення про успішне виконання або помилку.

### 4.2 Потік обробки команд

- Застосунок очікує введення команд у циклі.
- Парсить і перевіряє команди на коректність.
- Виконує операцію та показує результат.
- Цикл триває до введення команди `exit`.
- Команда `help` для виведення інформації по кожній команді. Приклад: `help add-contact`.

### 4.3 Обробка дат

- Дати повинні бути у форматі `dd.mm.yyyy`.
- Перевірка коректності враховує високосні роки; некоректні дати відхиляються з повідомленням про помилку.
- Валідація дати відбувається під час вводу.
- Обчислення "через N днів" коректно працює при переході через кінець року.

### 4.4 Команди

#### 4.4.1 Команди для керування контактами

##### 4.4.1.1 Створення контакту

Створює контакт за вказаним імʼям.

Команда: `add-contact name`

Аргументи:

- `name` ім'я контакту (унікальний).

Результат:

- інформація про те, що контакт було створено;
- або інформація про те, що контакт за вказаним іменем уже існує.

##### 4.4.1.2 Видалення контакту

Видаляє контакт.

Команда: `del-contact name`

Аргументи:

- `name` ім'я контакту.

Результат:

- інформація про те, що контакт було видалено та повну інформацію, яка містилась у контакті;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.3 Додавання номера телефону до контакту

Додає номер телефону до існуючого контакту

Команда: `add-phone name phone`

Аргументи:

- `name` ім'я контакту;
- `phone` номер телефону.

Результат:

- інформація про те, що номер телефону було додано до контакту;
- або повідомлення про помилку, як що контакт не було знайдено;
- або інформація про те, що вказаний номер телефону вже існує в контакті.

##### 4.4.1.4 Зміна номера телефону в контакті

Змінює номер телефону в існуючому контакті

Команда: `change-phone name old_phone new_phone`

Аргументи:

- `name` ім'я контакту;
- `old_phone` старий номер телефону;
- `new_phone` новий номер телефону.

Результат:

- інформація про те, що номер телефону було додано до контакту;
- або повідомлення про помилку, як що контакт не було знайдено;
- або інформація про те, що вказаний старий номер телефону відсутній у контакті;
- або інформація про те, що вказаний новий номер телефону вже існує у контакті.

##### 4.4.1.5 Видалення номера телефону з контакту

Видаляє номер телефону з існуючого контакту

Команда: `del-phone name phone`

Аргументи:

- `name` ім'я контакту;
- `phone` номер телефону.

Результат:

- інформація про те, що номер телефону було видалено з контакту;
- або повідомлення про помилку, як що контакт не було знайдено;
- або інформація про те, що вказаний номер телефону відсутній у контакті.

##### 4.4.1.6 Додавання адресу електронної пошти до контакту

Додає адресу електронної пошти до існуючого контакту

Команда: `add-email name email`

Аргументи:

- `name` ім'я контакту;
- `email` адреса електронної пошти.

Результат:

- інформація про те, що адресу електронної пошти було додано до контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.7 Видалення адреси електронної пошти з контакту

Видаляє адресу електронної пошти з існуючого контакту

Команда: `del-email name`

Аргументи:

- `name` ім'я контакту.

Результат:

- інформація про те, що адресу електронної пошти було видалено з контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.8 Додавання дати народження до контакту

Додає дату народження до існуючого контакту

Команда: `add-birthday name birthday`

Аргументи:

- `name` ім'я контакту;
- `birthday` дата народження.

Результат:

- інформація про те, що дату народження було додано до контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.9 Видалення дати народження з контакту

Видаляє дату народження з існуючого контакту

Команда: `del-birthday name`

Аргументи:

- `name` ім'я контакту.

Результат:

- інформація про те, що дату народження було видалення з контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.10 Додавання адреси до контакту

Додає адресу до існуючого контакту

Команда: `add-address name address`

Аргументи:

- `name` ім'я контакту;
- `address` адреса.

Результат:

- інформація про те, що адресу було додано до контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

##### 4.4.1.11 Видалення адреси з контакту

Видаляє адресу з існуючого контакту

Команда: `del-address name`

Аргументи:

- `name` ім'я контакту.

Результат:

- інформація про те, що адресу було видалено з контакту;
- або повідомлення про помилку, як що контакт не було знайдено.

#### 4.4.2 Команди для пошуку контактів

##### 4.4.2.1 Пошук контактів за імʼям

Виконує пошук контакту за ім'я.

Команда: `contact-by-name name`

Аргументи:

- `name` ім'я контакту.

Результат:

- список контактів відсортований на ім'я в алфавітному порядку;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила співставлення: пошук без урахування регістру;
- сортування результатів за іменем виконується без урахування регіструю

##### 4.4.2.2 Пошук контактів за номером телефону

Виконує пошук контакту за номером телефону.

Команда: `contact-by-phone phone`

Аргументи:

- `phone` номер телефону.

Результат:

- список контактів відсортований на ім'я в алфавітному порядку;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила співставлення: точний збіг після нормалізації до формату E.164 (ігноруючи пробіли/дефіси);
- сортування результатів за іменем виконується без урахування регістру.

##### 4.4.2.3 Пошук контактів за адресою електронної пошти

Виконує пошук контакту за адресою електронної пошти.

Команда: `contact-by-email email`

Аргументи:

- `email` адреса електронної пошти.

Результат:

- список контактів відсортований на ім'я в алфавітному порядку;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила співставлення: пошук без урахування регістру;
- сортування результатів за іменем виконується без урахування регістру.

##### 4.4.2.4 Пошук контактів за датою народження

Виконує пошук контакту за датою народження.

Команда: `contact-by-birthday birthday`

Аргументи:

- `birthday` дата народження.

Результат:

- список контактів відсортований на ім'я в алфавітному порядку;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила співставлення: точний збіг;
- сортування результатів за іменем виконується без урахування регістру.

#### 4.4.3 Команди для вибірки контактів за днями народження

##### Перелік днів народження

Виводить контакти з днями народження протягом N днів.

Команда: `list-birthdays days`

Аргументи:

- `days` кількості днів.

Результат:

- перелік імен з датами народження;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- якщо значення аргументу `days` не вказано, то використовується значення за замовчуванням котре дорівнює 7.

#### 4.4.4 Команди для керування нотатками

##### 4.4.4.1 Додавання нотатки

Додає нотатку та теги до неї.

Команда: `add-note text [tags]`

Аргумент

- `text`: текст нотатки;
- `tags`: теги (опційні).

Результат:

- інформація про те, що нотатка була додана та її ідентифікатор.

##### 4.4.4.2 Редагування нотатки

Редагує текст і теги.

Команда: `edit-note id text`

Аргумент

- `id`: унікальний ідентифікатор нотатки;
- `text`: текст нотатки.

Результат:

- інформація про те, що текст нотатку було оновлено.

##### 4.4.4.3 Видалення нотатки

Видаляє нотатку.

Команда: `del-note id`

Аргумент

- `id`: унікальний ідентифікатор нотатки;

Результат:

- інформація про те, що нотатку було видалено, та інформацію, котра містилася в нотатку.
- або повідомлення про помилку, як що нотатку не було знайдено.

##### 4.4.4.4 Пошук нотаток за текстом

Пошук нотаток за частиною тексту.

Команда: `note-by-text text`

Аргумент

- `text`: текст для пошуку;

Результат:

- перелік нотаток;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила пошуку: пошук підрядка без урахування регістру;

##### 4.4.4.5 Пошук нотаток за тегами

Пошук нотаток за частиною тексту.

Команда: `note-by-tags tags`

Аргумент

- `tags`: теги для пошуку;

Результат:

- перелік нотаток;
- або повідомлення про те, що нічого незнайдено.

Примітки:

- правила пошуку: порівняння без урахування регістру;

##### 4.4.4.6 Вивести перелік нотаток

Виводить перелік усіх нотаток.

Команда: `list-notes`

Результат:

- перелік нотаток;
- або повідомлення про те, що нотаток не існує.

#### 4.4.5 Команди для керування тегами нотатків

##### 4.4.5.1 Додавання тегів

Додає теги до наявної нотатки.

Команда: `add-tags id tags`

Аргументи:

- `id` унікальний ідентифікатор нотатки;
- `tags` перелік тегів, розділених комами, котрі треба додати до нотатку.

Результат:

- інформація про те, що тег(и) були додані, та їх поточний повний список.
- або повідомлення про помилку, як що нотатку не було знайдено.

##### 4.4.5.2 Видалення тегів

Видаляє теги з наявної нотатки

Команда: `del-tags id tags`

Аргументи:

- `id`  унікальний ідентифікатор нотатки;
- `tags` перелік тегів, розділених комами, котрі треба видалити з нотатку.

Примітки:

- якщо серед вказаних до видалення є теги, яких немає в нотатці, вони ігноруються.

Результат:

- інформація про те, що тег(и) було видалено та перелік тегів, котрі залишились.

##### 4.4.5.3 Вивести список унікальних тегів

Виводить перелік унікальних тегів, що використовуються у всіх нотатках.

Команда: `list-tags`

Результат:

- список унікальних тегів, відсортований алфавітно (без урахування регістру);
- або повідомлення про те, що нічого незнайдено.

#### 4.4.6 Допоміжні команди

##### 4.4.6.1 Виведення довідникової інформації по команді

Виводить довідникової інформації по кожній команді.

Команда: `help command`

Аргументи:

- `command` назва команди.

##### 4.4.6.2 Завершення роботи

Закриває програму.

Команда: `exit`

---

## 5. Обмеження

- Підтримуються лише однорядкові нотатки.
- Дати вводяться строго у форматі `dd.mm.yyyy`.
- Дані зберігаються між сесіями.

---

## 6. Можливі майбутні розширення

- Багаторядкові нотатки.
- Експорт/імпорт контактів та нотаток.
- Інтеграція з календарними нагадуваннями.

---

## 7. Нефункціональні вимоги (NFR)

- Платформа: CLI-додаток, що працює в середовищі термінала
- Надійність та цілісність даних
    - Запис на диск здійснюється атомарно, щоб уникнути втрати даних при збої: спочатку у тимчасовий файл, потім заміна
      основного файлу. У разі помилки запису показувати повідомлення і не пошкоджувати існуючі дані.
    - Перед кожним збереженням створюється резервна копія файлу з розширенням `.bak`.
    - Підтримка відновлення з `.bak` при пошкодженні основного файлу.
- Портативність та сумісність
    - Підтримка Windows, macOS, Linux. Кодування UTF-8 для вводу/виводу.
    - Усі повідомлення та дані зберігаються у UTF-8.
- Usability
    - Наявність довідки для кожної команди.
    - Зрозумілі повідомлення про помилки з підказками щодо виправлення.
- Локалізація: тексти повідомлень — українською; підтримка інших мов — як розширення.
- Формат зберігання: JSON.

---

## 8. Правила валідації вводу

- Телефон
    - Підтримка міжнародного формату E.164: `+` і до 15 цифр. Дозволяється введення з пробілами/дефісами, що
      нормалізуються при зберіганні.
    - Приклади валідних: `+380501234567`, `+1 650-555-0100` (нормалізується до `+16505550100`).
- Email
    - Базова перевірка: один символ `@`, домен з принаймні однією крапкою, лише ASCII/IDN-домен за потреби. Приклад:
      `user.name+tag@example.com` — валідний.
- Дата народження
    - Формат суворо `dd.mm.yyyy`, перевірка високосних років, виключення неіснуючих дат (напр., 31.11.2024 — невалідна).
- Теги нотаток
    - Ввід через роздільник кома: `--tags "робота,терміново"`.
    - Нормалізація: обрізання пробілів навколо; теги при зберіганні нормалізуються до нижнього регістру.
    - Порівняння та унікальність тегів — без урахування регістру (case-insensitive).
    - Обмеження: до 20 тегів на нотатку, довжина одного тегу — до 30 символів, при перевищенні — відмова з
      повідомленням.
- Обмеження розмірів:
    - Текст нотатки — до 500 символів, при перевищенні — відмова з повідомленням.
    - Ім'я контакту — до 32 символів, при перевищенні — відмова з повідомленням.
    - Адреса — до 300 символів, при перевищенні — відмова з повідомленням.

---

## 9. Зберігання даних та формат файлів

- Формат зберігання: JSON.
- Найменування файлів для зберігання даних:
    - Контакти: `contacts.json`.
    - Нотатки: `notes.json`.
- Місце зберігання: поточна директорія.
- Кодування: UTF-8, зберігати `version: 1` у корені кожного файлу.

---

## 10. Конвенції CLI

- Іменування команд: kebab-case (`add-contact`, `edit-note`).

---

## 11. Повідомлення про помилки

- У відповідь на помилку — коротка порада щодо виправлення та пропозиція повторного вводу.

---

## 12. Припущення, обмеження та місткість

- Однокористувацький сценарій, локальне зберігання, відсутність конкурентного доступу.
- За замовчуванням мова інтерфейсу — українська.

---

## 14. Ризики та заходи пом'якшення

- Помилки користувача (видалення не того запису) — очікування підтвердження в інтерактивному режимі.
